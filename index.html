<!doxtype html>
<html>

  <head>
  <title>D3 Plus</title>
  <!-- load in JS file -->
  <script src="http://d3plus.org/js/d3plus.full.min.js"></script>
  <style>
  .greendot {
    color: green;
  }
  </style>
  </head>

  <body>
    <div id="viz"></div>
  </body>

  <script>
//  var data = [
//    {"name":"Alex", "value":25, "population":100, "income":200},
//    {"name":"Jen", "value":50, "population":200, "income":300},
//    {"name":"Dave", "value":75, "population":200, "income":400},
//  ];

  function datafold(json) {
    return json.data.map(function(data) {
        return json.headers.reduce(function(obj, headers, i) {
          obj[headers] = data[i];
          return obj;
        }, {});
    });
}


  var myViz = d3plus.viz()
  .axes({"mirror":true})
                    .container("#viz")
                    .type("scatter")
                    .data("http://api.datausa.io/api/?show=geo&sumlevel=state&required=grads_hawaiian,grads_men,grads_women,geo&year=latest", datafold)
                    .id("geo")
                    .size("grads_hawaiian")
                    .x("grads_men")
                    .y("grads_women")
                    .color(function(d) {
                      if (d.grads_hawaiian > 100) return "red";
                        else return "green";
                    })
                    .tooltip(["grads_hawaiian","grads_men","grads_women"])
                    .format({
                      "text":function(text){
                        if (text.indexOf("grads_") === 0) return d3plus.string.title(text.split("_")[1]);
                          return text;
                      }
                    })
                    .draw()

  console.log(data)
  </script>
</html>
